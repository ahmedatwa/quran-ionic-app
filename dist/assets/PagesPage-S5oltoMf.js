import{d as D,E as _e,O as B,u as U,P as F,Q as pe,R as fe,S as K,o as n,f as d,b as a,w as t,a as e,T as j,U as W,s as A,V as G,W as Q,X,Y,h as x,j as k,c as V,B as ge,C as L,z as J,F as S,r as w,Z,_ as ee,t as v,$ as ae,g as be,a0 as te,a1 as ne,a2 as N,q as he,a3 as ye,a4 as ve,i as ze,p as E,a5 as se,a6 as Ie,a7 as ke,k as q,a8 as re,a9 as ie,m as M,aa as Ce,ab as Ve,ac as Se,ad as we,ae as O,D as xe,l as Pe}from"./index-BxKZXudA.js";import{u as Te}from"./JuzStore-CwiWQwvV.js";import{u as oe}from"./AudioPlayerStore-ChypCQq6.js";import{u as le}from"./ChapterStore-BCWT5l7E.js";import{_ as Be,A as ue}from"./AudioPlayerComponent-D2NqQKk4.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Ne}from"./PageStore-C4j2lKTa.js";import"./number-50Ioylus.js";import"./chapters-DjdraJUP.js";const $e={key:0,class:"ion-page"},je=E("hr",null,null,-1),Re={key:0,class:"end"},Le=["innerHTML"],De=D({__name:"TranslationsComponent",props:{isTranslationsView:{type:Boolean},isAudioPlaying:{},groupedTranslationsAuthors:{},audioExperience:{},cssVars:{},selectedVerseNumber:{},wordColor:{}},emits:["update:playAudio","update:headerData","update:intersectionData"],setup($,{emit:g}){const r=Te(),_=oe(),{cssVars:P}=_e(),{getChapterNameByFirstVerse:b}=le(),f=B(!1),z=B(),{getLine:T}=U(),R=F(),{chapterId:c}=R.params,o=pe({fontFamily:"var(--font-family-noto-kufi)",fontSize:"var(--font-size-2)"}),I=$,C=i=>{if(_.verseTiming&&I.isTranslationsView)return _.verseTiming.wordLocation===i.location},p=async i=>{await _.getAudio({audioID:i.audioID,verseKey:i.verseKey}),f.value=!0},y=B([]);fe(()=>{y.value.forEach(i=>{})}),K(async()=>{var i,l,u,h,s;if(_.audioPlayerSetting.autoScroll){const m=(i=_.verseTiming)==null?void 0:i.verseNumber,H=r.getLastVerseOfJuz;z.value=Number((l=_.verseTiming)==null?void 0:l.verseNumber),(u=I.isAudioPlaying)!=null&&u.isPlaying&&m&&(m===H||m>=H-5)&&(s=(h=r.selectedJuz)==null?void 0:h.pagination)!=null&&s.next_page&&await r.getVerses(r.selectedJuz.juz_number,!0,r.selectedJuz.pagination.next_page)}});const de=async i=>{var l,u,h,s;(u=(l=r.selectedJuz)==null?void 0:l.pagination)!=null&&u.next_page?(await r.getVerses(r.selectedJuz.juz_number,!0,(s=(h=r.selectedJuz)==null?void 0:h.pagination)==null?void 0:s.next_page),setTimeout(()=>i.target.complete(),500)):i.target.complete()},ce=i=>{},me=i=>{var l,u;(u=(l=r.selectedJuz)==null?void 0:l.verses)==null||u.forEach(h=>{h.verse_number===i&&(h.bookmarked=!0)})};return(i,l)=>i.isTranslationsView?(n(),d("div",$e,[a(e(J),{color:"light"},{default:t(()=>[a(e(j),{slot:"start"},{default:t(()=>[a(e(W),{"router-link":"/juzs","router-direction":"back"},{default:t(()=>[a(e(A),{icon:e(G)},null,8,["icon"])]),_:1})]),_:1}),a(e(j),{slot:"end"},{default:t(()=>[a(e(Q),{onClick:l[0]||(l[0]=u=>p({audioID:Number(e(c))})),color:"primary"},{default:t(()=>[a(e(A),{color:"primary",icon:e(_).isPlaying?e(X):e(Y)},null,8,["icon"]),a(e(x),null,{default:t(()=>[k("Play Audio")]),_:1})]),_:1})]),_:1}),e(r).isLoading?(n(),V(e(ge),{key:0,type:"indeterminate"})):L("",!0)]),_:1}),a(e(q),{class:"quran-translation-view",fullscreen:!0,"scroll-events":!0,onIonScroll:ce},{default:t(()=>[(n(!0),d(S,null,w(e(r).juzVersesByChapterMap,(u,h)=>(n(),V(e(se),{class:"ion-padding",key:h,id:"card-".concat(h)},{default:t(()=>[a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>{var s;return[k(v((s=e(b)(u[0]))!=null&&s.bismillahPre?e(T)("quranReader.textBismillah"):""),1)]}),_:2},1024),a(e(ae),null,{default:t(()=>{var s;return[k(v((s=e(b)(u[0]))==null?void 0:s.nameArabic),1)]}),_:2},1024)]),_:2},1024),je,(n(!0),d(S,null,w(u,s=>(n(),V(e(be),{key:s.verse_number,"data-verse-number":s.verse_number,"data-hizb-number":s.hizb_number,"data-juz-number":s.juz_number,ref_for:!0,ref_key:"itemRefs",ref:y},{default:t(()=>[a(e(te),null,{default:t(()=>[a(e(ne),{class:"ion-align-items-start"},{default:t(()=>[a(e(N),{size:"11",class:"quran-translation-view ion-wrap"},{default:t(()=>[(n(!0),d(S,null,w(s.words,m=>(n(),V(e(x),{key:m.id,class:"word"},{default:t(()=>[a(e(he),{color:C(m)?"primary":""},{default:t(()=>[m.char_type_name==="end"?(n(),d("h3",Re," ("+v(m.text_uthmani)+")",1)):(n(),d("h3",{key:1,style:ye([o,e(P)])},v(m.text_uthmani),5))]),_:2},1032,["color"])]),_:2},1024))),128))]),_:2},1024),a(e(N),{size:"1"},{default:t(()=>[a(e(A),{icon:e(ve),color:"primary",id:"open-action-sheet".concat(s.verse_number)},null,8,["icon","id"]),a(Be,{verse:s,"trigger-prop":"open-action-sheet".concat(s.verse_number),"onUpdate:bookmarked":me,"onUpdate:playVerseAudio":l[1]||(l[1]=m=>p({...m}))},null,8,["verse","trigger-prop"])]),_:2},1024),a(e(N),{size:"12",class:"ion-text-left"},{default:t(()=>[(n(!0),d(S,null,w(s.translations,m=>(n(),V(e(ze),{key:m.id,class:"translation"},{default:t(()=>[E("span",{innerHTML:m.text},null,8,Le)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-verse-number","data-hizb-number","data-juz-number"]))),128))]),_:2},1032,["id"]))),128)),a(e(Ie),{onIonInfinite:de},{default:t(()=>[a(e(ke),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1}),re(a(ue,{"onUpdate:modelValue":l[2]||(l[2]=u=>f.value=u)},null,512),[[ie,f.value]])])):L("",!0)}}),Je={key:0,class:"ion-page"},Ee=["id","data-hizb-number","data-chapter-id","data-juz-number","data-page-number","data-verse-number"],qe=["data-word-position","data-hizb-number","data-juz-number","data-chapter-id","data-page-number"],He={key:0},Me={key:1},Oe=D({__name:"ReadingComponent",props:{isReadingView:{type:Boolean},verseTiming:{},isAudioPlaying:{},audioExperience:{}},setup($){const g=le(),r=oe(),_=B(!1),{getLine:P}=U(),b=$,f=M(()=>{if(g.selectedChapterVerses)return g.selectedChapterVerses.sort((c,o)=>c.verse_number-o.verse_number)}),z=M(()=>{if(f.value)return f.value.reduce((c,o)=>((c[o.page_number]=c[o.page_number]||[]).push(o),c),{})}),T=(c,o)=>{if(b.isReadingView&&b.verseTiming)return b.verseTiming.wordLocation===c&&o===b.verseTiming.verseKey},R=()=>{var o;const c=(o=g.selectedChapter)==null?void 0:o.id;c&&r.getAudio({audioID:c}),_.value=!0};return(c,o)=>c.isReadingView?(n(),d("div",Je,[a(e(J),{color:"light"},{default:t(()=>[a(e(j),{slot:"start"},{default:t(()=>[a(e(W),{"router-link":"/juzs","router-direction":"back"},{default:t(()=>[a(e(A),{icon:e(G)},null,8,["icon"])]),_:1})]),_:1}),a(e(j),{slot:"end"},{default:t(()=>[a(e(Q),{onClick:R,color:"primary"},{default:t(()=>[a(e(A),{color:"primary",icon:e(r).isPlaying?e(X):e(Y)},null,8,["icon"]),a(e(x),null,{default:t(()=>[k("Play Audio")]),_:1})]),_:1})]),_:1})]),_:1}),a(e(q),null,{default:t(()=>[a(e(se),{class:"ion-padding"},{default:t(()=>[a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>[k(v(e(g).selectedChapterBismillah),1)]),_:1}),a(e(ae),null,{default:t(()=>{var I;return[k(v((I=e(g).selectedChapter)==null?void 0:I.nameArabic),1)]}),_:1})]),_:1}),a(e(Ce),{class:"ion-padding quran-reader-container"},{default:t(()=>[a(e(te),null,{default:t(()=>[(n(!0),d(S,null,w(z.value,(I,C)=>(n(),V(e(ne),{key:C,id:"row-page-".concat(C),class:""},{default:t(()=>[a(e(N),{class:"verse-col",id:"page-".concat(C),size:"12"},{default:t(()=>[(n(!0),d(S,null,w(I,p=>(n(),d("div",{class:"reading-view-word-wrapper",key:p.id,id:"line-".concat(p.verse_number),"data-hizb-number":p.hizb_number,"data-chapter-id":p.chapter_id,"data-juz-number":p.juz_number,"data-page-number":C,"data-verse-number":p.verse_number},[(n(!0),d(S,null,w(p.words,y=>(n(),d("h3",{key:y.id,"data-word-position":y.position,class:"flex","data-hizb-number":p.hizb_number,"data-juz-number":p.juz_number,"data-chapter-id":p.chapter_id,"data-page-number":C},[E("div",{class:Ve([T(y.location,y.verse_key)?"text-blue":"","word"])},[y.char_type_name==="end"?(n(),d("div",He,"("+v(y.text_uthmani)+") ",1)):(n(),d("div",Me,v(y.text_uthmani),1))],2)],8,qe))),128))],8,Ee))),128))]),_:2},1032,["id"]),a(e(N),{size:"12"},{default:t(()=>[a(e(Se),null,{default:t(()=>[a(e(x),{class:"m-auto"},{default:t(()=>[k(v(e(P)("quranReader.textPage"))+" "+v(C),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1}),re(a(ue,{"onUpdate:modelValue":o[0]||(o[0]=I=>_.value=I)},null,512),[[ie,_.value]])]),_:1})])):L("",!0)}}),Ue=Ae(Oe,[["__scopeId","data-v-533ef703"]]),aa=D({__name:"PagesPage",setup($){const g=B("translations"),r=Ne(),_=f=>{g.value=f.detail.value},P=F(),{pageId:b}=P.params;return K(async()=>{var f;if(b){r.selectedPage=null;const z=r.pagesList.find(T=>T.pageNumber===Number(b));z&&((f=z.verses)!=null&&f.length?r.selectedPage=z:await r.getVerses(z.pageNumber,!0))}}),(f,z)=>(n(),V(e(Pe),{"data-page-id":e(b)},{default:t(()=>[a(e(xe),null,{default:t(()=>[a(e(J),null,{default:t(()=>[a(e(we),{value:g.value,onIonChange:_},{default:t(()=>[a(e(O),{value:"translations"},{default:t(()=>[a(e(x),null,{default:t(()=>[k("Translations")]),_:1})]),_:1}),a(e(O),{value:"reading"},{default:t(()=>[a(e(x),null,{default:t(()=>[k("Reading")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(e(q),null,{default:t(()=>[a(De,{"is-translations-view":g.value==="translations"},null,8,["is-translations-view"]),a(Ue,{"is-reading-view":g.value==="reading"},null,8,["is-reading-view"])]),_:1})]),_:1},8,["data-page-id"]))}});export{aa as default};
