import{af as Q,E as j,O as a,m as l,R as z,aC as G,N as J}from"./index-BxKZXudA.js";import{u as W,A as X,i as A,e as Y,r as Z}from"./ChapterStore-BCWT5l7E.js";const ie=Q("audio-player-store",()=>{const g=j(),{getChapterNameByChapterId:P,TOTAL_CHAPTERS:R,getChapter:I}=W(),d=a(!1),n=a(null),_=a(!1),t=a(0),y=a(""),p=a(""),s=a({id:7,reciter_id:6,name:"Mishari Rashid al-`Afasy",translated_name:{name:"Mishari Rashid al-`Afasy",language_name:"english"},style:{name:"Murattal",language_name:"english",description:"Murattal is Quranic recitation at a slower pace, used for study and practice."},qirat:{name:"Hafs",language_name:"english"}}),w=a(["0.25","0.5","0.75","Normal","1.25","1.5","1.75","2"]),o=a([]),D=a(),T=l(()=>{document.querySelector("#audioPlayerRef")}),C=a("Normal"),v=a(!1),L=a(0),N=a("00:00"),b=a(""),k=a(0),M=a(1),f=a(!1),E=a(!1),F=a("none"),O=a(),H=a(0),m=a({fullwidth:!1,autoPlay:!0,dismissOnEnd:!0,autoScroll:!0,tooltip:!1}),V=l(()=>{const e=P(t.value);if(e)return e.nameSimple}),r=async(e,u)=>{var S;const i=I(e.audioID);if(t.value=e.audioID,p.value=e.verseKey,y.value=e.audioSrc?e.audioSrc:u,((S=i==null?void 0:i.audioFile)==null?void 0:S.reciterId)===s.value.id&&(i==null?void 0:i.audioFile.chapter_id)===e.audioID){n.value=i.audioFile;return}d.value=!0,await A.get(Y(s.value.id,e.audioID)).then(c=>{n.value=null,n.value={reciterId:s.value.id,...c.data.audio_files[0]},i&&(i.audioFile={reciterId:s.value.id,...c.data.audio_files[0]})}).catch(c=>{throw c}).finally(()=>{d.value=!1})},h=async()=>{await A.get(Z).then(e=>{o.value=e.data.reciters}).catch(e=>{throw e})},q=async e=>{s.value=e,await r({audioID:t.value})},x=async e=>{t.value&&(g.isAppLoading=!0,t.value=t.value>=R?1:t.value+1,await r({audioID:t.value},e),n.value&&(g.isAppLoading=!1))},B=async()=>{t.value&&(t.value=t.value-1,await r({audioID:t.value}))};z(async()=>{await h();const e=G("user-setting");e?m.value=e:J("user-setting",m.value)});const K=l(()=>{if(o.value)return o.value.reduce((e,u)=>((e[u.style.name]=e[u.style.name]||[]).push(u),e),{})}),U=l(()=>{if(s.value){const e=s.value.name.split(" ");return e[0].charAt(0)+e[1].charAt(0)}}),$=l(()=>"".concat(X,'?name="').concat(s.value.name));return{audioFiles:n,isLoading:d,playbackSpeeds:w,selectedReciter:s,recitations:o,chapterName:V,chapterId:t,autoStartPlayer:_,selectedVerseKey:p,mapRecitions:K,verseTiming:D,audioPayLoadSrc:y,getReciterNameInitials:U,avatarPlaceholder:$,audioPlayerRef:T,playbackRate:C,listenerActive:v,progressTimer:L,elapsedTime:N,audioDuration:b,duration:k,mediaVolume:M,isPlaying:f,isMuted:E,loopAudio:F,audioBuffer:O,currentTimestamp:H,audioPlayerSetting:m,playbackPlaying:()=>{f.value=!0,v.value=!0},playbackPaused:()=>{f.value=!1,v.value=!1},getRecitations:h,getAudio:r,getRecition:q,playNext:x,playPrevious:B}});export{ie as u};
