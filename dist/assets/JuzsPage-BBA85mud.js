import{d as L,E as pe,O as j,u as U,P as F,Q as fe,R as ge,S as K,o as n,f as d,b as a,w as t,a as e,T as $,U as W,s as B,V as G,W as Q,X,Y,h as x,j as k,c as V,B as be,C as J,z as D,F as w,r as S,Z,_ as ee,t as v,$ as ae,g as he,a0 as te,a1 as ne,a2 as A,q as ye,a3 as ve,a4 as ze,i as Ie,p as E,a5 as se,a6 as ke,a7 as Ce,k as q,a8 as re,a9 as ie,m as M,aa as Ve,ab as we,ac as Se,ad as xe,ae as O,D as Te,l as Pe}from"./index-BxKZXudA.js";import{u as oe}from"./JuzStore-CwiWQwvV.js";import{u as ue}from"./AudioPlayerStore-ChypCQq6.js";import{u as le}from"./ChapterStore-BCWT5l7E.js";import{_ as je,A as de}from"./AudioPlayerComponent-D2NqQKk4.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./number-50Ioylus.js";const Ae={key:0,class:"ion-page"},Ne=E("hr",null,null,-1),$e={key:0,class:"end"},Re=["innerHTML"],Je=L({__name:"TranslationsComponent",props:{isTranslationsView:{type:Boolean},isAudioPlaying:{},groupedTranslationsAuthors:{},audioExperience:{},cssVars:{},selectedVerseNumber:{},wordColor:{}},emits:["update:playAudio","update:headerData","update:intersectionData"],setup(N,{emit:g}){const r=oe(),_=ue(),{cssVars:T}=pe(),{getChapterNameByFirstVerse:b}=le(),f=j(!1),z=j(),{getLine:P}=U(),R=F(),{chapterId:c}=R.params,o=fe({fontFamily:"var(--font-family-noto-kufi)",fontSize:"var(--font-size-2)"}),I=N,C=i=>{if(_.verseTiming&&I.isTranslationsView)return _.verseTiming.wordLocation===i.location},p=async i=>{await _.getAudio({audioID:i.audioID,verseKey:i.verseKey}),f.value=!0},y=j([]);ge(()=>{y.value.forEach(i=>{})}),K(async()=>{var i,u,l,h,s;if(_.audioPlayerSetting.autoScroll){const m=(i=_.verseTiming)==null?void 0:i.verseNumber,H=r.getLastVerseOfJuz;z.value=Number((u=_.verseTiming)==null?void 0:u.verseNumber),(l=I.isAudioPlaying)!=null&&l.isPlaying&&m&&(m===H||m>=H-5)&&(s=(h=r.selectedJuz)==null?void 0:h.pagination)!=null&&s.next_page&&await r.getVerses(r.selectedJuz.juz_number,!0,r.selectedJuz.pagination.next_page)}});const ce=async i=>{var u,l,h,s;(l=(u=r.selectedJuz)==null?void 0:u.pagination)!=null&&l.next_page?(await r.getVerses(r.selectedJuz.juz_number,!0,(s=(h=r.selectedJuz)==null?void 0:h.pagination)==null?void 0:s.next_page),setTimeout(()=>i.target.complete(),500)):i.target.complete()},me=i=>{},_e=i=>{var u,l;(l=(u=r.selectedJuz)==null?void 0:u.verses)==null||l.forEach(h=>{h.verse_number===i&&(h.bookmarked=!0)})};return(i,u)=>i.isTranslationsView?(n(),d("div",Ae,[a(e(D),{color:"light"},{default:t(()=>[a(e($),{slot:"start"},{default:t(()=>[a(e(W),{"router-link":"/juzs","router-direction":"back"},{default:t(()=>[a(e(B),{icon:e(G)},null,8,["icon"])]),_:1})]),_:1}),a(e($),{slot:"end"},{default:t(()=>[a(e(Q),{onClick:u[0]||(u[0]=l=>p({audioID:Number(e(c))})),color:"primary"},{default:t(()=>[a(e(B),{color:"primary",icon:e(_).isPlaying?e(X):e(Y)},null,8,["icon"]),a(e(x),null,{default:t(()=>[k("Play Audio")]),_:1})]),_:1})]),_:1}),e(r).isLoading?(n(),V(e(be),{key:0,type:"indeterminate"})):J("",!0)]),_:1}),a(e(q),{class:"quran-translation-view",fullscreen:!0,"scroll-events":!0,onIonScroll:me},{default:t(()=>[(n(!0),d(w,null,S(e(r).juzVersesByChapterMap,(l,h)=>(n(),V(e(se),{class:"ion-padding",key:h,id:"card-".concat(h)},{default:t(()=>[a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>{var s;return[k(v((s=e(b)(l[0]))!=null&&s.bismillahPre?e(P)("quranReader.textBismillah"):""),1)]}),_:2},1024),a(e(ae),null,{default:t(()=>{var s;return[k(v((s=e(b)(l[0]))==null?void 0:s.nameArabic),1)]}),_:2},1024)]),_:2},1024),Ne,(n(!0),d(w,null,S(l,s=>(n(),V(e(he),{key:s.verse_number,"data-verse-number":s.verse_number,"data-hizb-number":s.hizb_number,"data-juz-number":s.juz_number,ref_for:!0,ref_key:"itemRefs",ref:y},{default:t(()=>[a(e(te),null,{default:t(()=>[a(e(ne),{class:"ion-align-items-start"},{default:t(()=>[a(e(A),{size:"11",class:"quran-translation-view ion-wrap"},{default:t(()=>[(n(!0),d(w,null,S(s.words,m=>(n(),V(e(x),{key:m.id,class:"word"},{default:t(()=>[a(e(ye),{color:C(m)?"primary":""},{default:t(()=>[m.char_type_name==="end"?(n(),d("h3",$e," ("+v(m.text_uthmani)+")",1)):(n(),d("h3",{key:1,style:ve([o,e(T)])},v(m.text_uthmani),5))]),_:2},1032,["color"])]),_:2},1024))),128))]),_:2},1024),a(e(A),{size:"1"},{default:t(()=>[a(e(B),{icon:e(ze),color:"primary",id:"open-action-sheet".concat(s.verse_number)},null,8,["icon","id"]),a(je,{verse:s,"trigger-prop":"open-action-sheet".concat(s.verse_number),"onUpdate:bookmarked":_e,"onUpdate:playVerseAudio":u[1]||(u[1]=m=>p({...m}))},null,8,["verse","trigger-prop"])]),_:2},1024),a(e(A),{size:"12",class:"ion-text-left"},{default:t(()=>[(n(!0),d(w,null,S(s.translations,m=>(n(),V(e(Ie),{key:m.id,class:"translation"},{default:t(()=>[E("span",{innerHTML:m.text},null,8,Re)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-verse-number","data-hizb-number","data-juz-number"]))),128))]),_:2},1032,["id"]))),128)),a(e(ke),{onIonInfinite:ce},{default:t(()=>[a(e(Ce),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1}),re(a(de,{"onUpdate:modelValue":u[2]||(u[2]=l=>f.value=l)},null,512),[[ie,f.value]])])):J("",!0)}}),Le={key:0,class:"ion-page"},De=["id","data-hizb-number","data-chapter-id","data-juz-number","data-page-number","data-verse-number"],Ee=["data-word-position","data-hizb-number","data-juz-number","data-chapter-id","data-page-number"],qe={key:0},He={key:1},Me=L({__name:"ReadingComponent",props:{isReadingView:{type:Boolean},verseTiming:{},isAudioPlaying:{},audioExperience:{}},setup(N){const g=le(),r=ue(),_=j(!1),{getLine:T}=U(),b=N,f=M(()=>{if(g.selectedChapterVerses)return g.selectedChapterVerses.sort((c,o)=>c.verse_number-o.verse_number)}),z=M(()=>{if(f.value)return f.value.reduce((c,o)=>((c[o.page_number]=c[o.page_number]||[]).push(o),c),{})}),P=(c,o)=>{if(b.isReadingView&&b.verseTiming)return b.verseTiming.wordLocation===c&&o===b.verseTiming.verseKey},R=()=>{var o;const c=(o=g.selectedChapter)==null?void 0:o.id;c&&r.getAudio({audioID:c}),_.value=!0};return(c,o)=>c.isReadingView?(n(),d("div",Le,[a(e(D),{color:"light"},{default:t(()=>[a(e($),{slot:"start"},{default:t(()=>[a(e(W),{"router-link":"/juzs","router-direction":"back"},{default:t(()=>[a(e(B),{icon:e(G)},null,8,["icon"])]),_:1})]),_:1}),a(e($),{slot:"end"},{default:t(()=>[a(e(Q),{onClick:R,color:"primary"},{default:t(()=>[a(e(B),{color:"primary",icon:e(r).isPlaying?e(X):e(Y)},null,8,["icon"]),a(e(x),null,{default:t(()=>[k("Play Audio")]),_:1})]),_:1})]),_:1})]),_:1}),a(e(q),null,{default:t(()=>[a(e(se),{class:"ion-padding"},{default:t(()=>[a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>[k(v(e(g).selectedChapterBismillah),1)]),_:1}),a(e(ae),null,{default:t(()=>{var I;return[k(v((I=e(g).selectedChapter)==null?void 0:I.nameArabic),1)]}),_:1})]),_:1}),a(e(Ve),{class:"ion-padding quran-reader-container"},{default:t(()=>[a(e(te),null,{default:t(()=>[(n(!0),d(w,null,S(z.value,(I,C)=>(n(),V(e(ne),{key:C,id:"row-page-".concat(C),class:""},{default:t(()=>[a(e(A),{class:"verse-col",id:"page-".concat(C),size:"12"},{default:t(()=>[(n(!0),d(w,null,S(I,p=>(n(),d("div",{class:"reading-view-word-wrapper",key:p.id,id:"line-".concat(p.verse_number),"data-hizb-number":p.hizb_number,"data-chapter-id":p.chapter_id,"data-juz-number":p.juz_number,"data-page-number":C,"data-verse-number":p.verse_number},[(n(!0),d(w,null,S(p.words,y=>(n(),d("h3",{key:y.id,"data-word-position":y.position,class:"flex","data-hizb-number":p.hizb_number,"data-juz-number":p.juz_number,"data-chapter-id":p.chapter_id,"data-page-number":C},[E("div",{class:we([P(y.location,y.verse_key)?"text-blue":"","word"])},[y.char_type_name==="end"?(n(),d("div",qe,"("+v(y.text_uthmani)+") ",1)):(n(),d("div",He,v(y.text_uthmani),1))],2)],8,Ee))),128))],8,De))),128))]),_:2},1032,["id"]),a(e(A),{size:"12"},{default:t(()=>[a(e(Se),null,{default:t(()=>[a(e(x),{class:"m-auto"},{default:t(()=>[k(v(e(T)("quranReader.textPage"))+" "+v(C),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1}),re(a(de,{"onUpdate:modelValue":o[0]||(o[0]=I=>_.value=I)},null,512),[[ie,_.value]])]),_:1})])):J("",!0)}}),Oe=Be(Me,[["__scopeId","data-v-3b73db31"]]),Ye=L({__name:"JuzsPage",setup(N){const g=j("translations"),r=oe(),_=f=>{g.value=f.detail.value},T=F(),{juzId:b}=T.params;return K(async()=>{var f;if(b){r.selectedJuz=null;const z=r.juzList.find(P=>P.juz_number===Number(b));z&&((f=z.verses)!=null&&f.length?r.selectedJuz=z:await r.getVerses(z.id,!0))}}),(f,z)=>(n(),V(e(Pe),{"data-juz-id":e(b)},{default:t(()=>[a(e(Te),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(xe),{value:g.value,onIonChange:_},{default:t(()=>[a(e(O),{value:"translations"},{default:t(()=>[a(e(x),null,{default:t(()=>[k("Translations")]),_:1})]),_:1}),a(e(O),{value:"reading"},{default:t(()=>[a(e(x),null,{default:t(()=>[k("Reading")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(e(q),null,{default:t(()=>[a(Je,{"is-translations-view":g.value==="translations"},null,8,["is-translations-view"]),a(Oe,{"is-reading-view":g.value==="reading"},null,8,["is-reading-view"])]),_:1})]),_:1},8,["data-juz-id"]))}});export{Ye as default};
