import{d as E,E as F,O as z,P as K,m as D,R as ce,S as G,o as r,f as c,b as a,w as t,a as e,T as L,U as X,s as B,V as Y,W as Z,X as J,Y as Q,h as T,j as I,c as w,B as me,C as j,z as H,a5 as ee,Z as ae,$ as te,t as h,_ as ne,F as x,r as P,a0 as se,a1 as re,a2 as N,q as pe,a3 as le,a4 as fe,i as _e,p as O,g as he,a6 as ge,a7 as be,k as q,a8 as ie,a9 as oe,u as ye,aa as ve,ab as Ce,ac as Ie,ad as ke,ae as W,D as Ve,l as Se}from"./index-BxKZXudA.js";import{_ as we,A as ue}from"./AudioPlayerComponent-D2NqQKk4.js";import{u as M}from"./ChapterStore-BCWT5l7E.js";import{u as de}from"./AudioPlayerStore-ChypCQq6.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";const xe={key:0,class:"ion-page"},Pe=O("hr",null,null,-1),Te={key:0,class:"end"},Ae=["innerHTML"],Be=E({__name:"TranslationsComponent",props:{isTranslationsView:{type:Boolean},isAudioPlaying:{},groupedTranslationsAuthors:{},audioExperience:{},selectedVerseNumber:{},wordColor:{},defaultStyles:{}},emits:["update:playAudio","update:headerData","update:intersectionData"],setup($,{emit:p}){const n=M(),f=de(),{cssVars:V}=F(),g=z(!1),b=z(),_=K(),{chapterId:y}=_.params,A=D(()=>{if(n.selectedChapterVerses)return n.selectedChapterVerses.sort((l,o)=>l.verse_number-o.verse_number)}),R=$,d=l=>{if(f.verseTiming&&R.isTranslationsView)return f.verseTiming.wordLocation===l.location},u=async l=>{await f.getAudio({audioID:l.audioID,verseKey:l.verseKey}),g.value=!0},v=z([]);ce(()=>{v.value.forEach(l=>{})}),G(async()=>{var l,o,s,i;if(f.audioPlayerSetting.autoScroll){const S=(l=f.verseTiming)==null?void 0:l.verseNumber,U=n.getLastVerseNumberOfChapter;b.value=Number((o=f.verseTiming)==null?void 0:o.verseNumber),(s=R.isAudioPlaying)!=null&&s.isPlaying&&S&&(S===U||S>=U-5)&&(i=n.selectedChapterPagination)!=null&&i.next_page&&await n.getVerses(n.selectedChapterId,!0,n.selectedChapterPagination.next_page)}});const k=async l=>{var o,s,i,S;(s=(o=n.selectedChapter)==null?void 0:o.pagination)!=null&&s.next_page?(await n.getVerses(n.selectedChapter.id,!0,(S=(i=n.selectedChapter)==null?void 0:i.pagination)==null?void 0:S.next_page),setTimeout(()=>l.target.complete(),500)):l.target.complete()},m=l=>{},C=l=>{var o,s;(s=(o=n.selectedChapter)==null?void 0:o.verses)==null||s.forEach(i=>{i.verse_number===l&&(i.bookmarked=!0)})};return(l,o)=>l.isTranslationsView?(r(),c("div",xe,[a(e(H),{color:"light"},{default:t(()=>[a(e(L),{slot:"start"},{default:t(()=>[a(e(X),{"router-link":"/chapters","router-direction":"back"},{default:t(()=>[a(e(B),{icon:e(Y)},null,8,["icon"])]),_:1})]),_:1}),a(e(L),{slot:"end"},{default:t(()=>[a(e(Z),{onClick:o[0]||(o[0]=s=>u({audioID:Number(e(y))})),color:"primary"},{default:t(()=>[a(e(B),{color:"primary",icon:e(f).isPlaying?e(J):e(Q)},null,8,["icon"]),a(e(T),null,{default:t(()=>[I("Play Audio")]),_:1})]),_:1})]),_:1}),e(n).isLoading.verses?(r(),w(e(me),{key:0,type:"indeterminate"})):j("",!0)]),_:1}),a(e(q),{class:"quran-translation-view",fullscreen:!0,"scroll-events":!0,onIonScroll:m},{default:t(()=>[a(e(ee),{class:"ion-padding"},{default:t(()=>[a(e(ae),{class:"ion-text-center"},{default:t(()=>[a(e(te),null,{default:t(()=>[I(h(e(n).selectedChapterName.nameArabic),1)]),_:1}),a(e(ne),null,{default:t(()=>[I(h(e(n).selectedChapterBismillah),1)]),_:1})]),_:1}),Pe,(r(!0),c(x,null,P(A.value,s=>(r(),w(e(he),{key:s.verse_number,"data-verse-number":s.verse_number,"data-hizb-number":s.hizb_number,"data-juz-number":s.juz_number,ref_for:!0,ref_key:"itemRefs",ref:v},{default:t(()=>[a(e(se),null,{default:t(()=>[a(e(re),{class:"ion-align-items-start"},{default:t(()=>[a(e(N),{size:"11",class:"quran-translation-view ion-wrap"},{default:t(()=>[(r(!0),c(x,null,P(s.words,i=>(r(),w(e(T),{key:i.id,class:"word"},{default:t(()=>[a(e(pe),{color:d(i)?"primary":""},{default:t(()=>[i.char_type_name==="end"?(r(),c("h3",Te," ("+h(i.text_uthmani)+")",1)):(r(),c("h3",{key:1,style:le([l.defaultStyles,e(V)])},h(i.text_uthmani),5))]),_:2},1032,["color"])]),_:2},1024))),128))]),_:2},1024),a(e(N),{size:"1"},{default:t(()=>[a(e(B),{icon:e(fe),color:"primary",id:"open-action-sheet".concat(s.verse_number)},null,8,["icon","id"]),a(we,{verse:s,"trigger-prop":"open-action-sheet".concat(s.verse_number),"onUpdate:bookmarked":C,"onUpdate:playVerseAudio":o[1]||(o[1]=i=>u({...i}))},null,8,["verse","trigger-prop"])]),_:2},1024),a(e(N),{size:"12",class:"ion-text-left"},{default:t(()=>[(r(!0),c(x,null,P(s.translations,i=>(r(),w(e(_e),{key:i.id,class:"translation"},{default:t(()=>[O("span",{innerHTML:i.text},null,8,Ae)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-verse-number","data-hizb-number","data-juz-number"]))),128))]),_:1}),a(e(ge),{onIonInfinite:k},{default:t(()=>[a(e(be),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1}),ie(a(ue,{"onUpdate:modelValue":o[2]||(o[2]=s=>g.value=s)},null,512),[[oe,g.value]])])):j("",!0)}}),Ne={key:0,class:"ion-page"},$e=["id","data-hizb-number","data-chapter-id","data-juz-number","data-page-number","data-verse-number"],Re=["data-word-position","data-hizb-number","data-juz-number","data-chapter-id","data-page-number"],Le={key:0},De=E({__name:"ReadingComponent",props:{isReadingView:{type:Boolean},verseTiming:{},isAudioPlaying:{},audioExperience:{},defaultStyles:{}},setup($){const p=M(),n=de(),{cssVars:f}=F(),V=z(!1),{getLine:g}=ye(),b=$,_=D(()=>{if(p.selectedChapterVerses)return p.selectedChapterVerses.sort((d,u)=>d.verse_number-u.verse_number)}),y=D(()=>{if(_.value)return _.value.reduce((d,u)=>((d[u.page_number]=d[u.page_number]||[]).push(u),d),{})}),A=(d,u)=>{if(b.isReadingView&&b.verseTiming)return b.verseTiming.wordLocation===d&&u===b.verseTiming.verseKey},R=()=>{var u;const d=(u=p.selectedChapter)==null?void 0:u.id;d&&n.getAudio({audioID:d}),V.value=!0};return(d,u)=>d.isReadingView?(r(),c("div",Ne,[a(e(H),{color:"light"},{default:t(()=>[a(e(L),{slot:"start"},{default:t(()=>[a(e(X),{"router-link":"/chapters","router-direction":"back"},{default:t(()=>[a(e(B),{icon:e(Y)},null,8,["icon"])]),_:1})]),_:1}),a(e(L),{slot:"end"},{default:t(()=>[a(e(Z),{onClick:R,color:"primary"},{default:t(()=>[a(e(B),{color:"primary",icon:e(n).isPlaying?e(J):e(Q)},null,8,["icon"]),a(e(T),null,{default:t(()=>[I("Play Audio")]),_:1})]),_:1})]),_:1})]),_:1}),a(e(q),null,{default:t(()=>[a(e(ee),{class:"ion-padding"},{default:t(()=>[a(e(ae),{class:"ion-text-center"},{default:t(()=>[a(e(ne),null,{default:t(()=>[I(h(e(p).selectedChapterBismillah),1)]),_:1}),a(e(te),null,{default:t(()=>{var v;return[I(h((v=e(p).selectedChapter)==null?void 0:v.nameArabic),1)]}),_:1})]),_:1}),a(e(ve),{class:"ion-padding quran-reader-container"},{default:t(()=>[a(e(se),null,{default:t(()=>[(r(!0),c(x,null,P(y.value,(v,k)=>(r(),w(e(re),{key:k,id:"row-page-".concat(k),class:""},{default:t(()=>[a(e(N),{class:"verse-col",id:"page-".concat(k),size:"12"},{default:t(()=>[(r(!0),c(x,null,P(v,m=>(r(),c("div",{class:"reading-view-word-wrapper",key:m.id,id:"line-".concat(m.verse_number),"data-hizb-number":m.hizb_number,"data-chapter-id":m.chapter_id,"data-juz-number":m.juz_number,"data-page-number":k,"data-verse-number":m.verse_number},[(r(!0),c(x,null,P(m.words,C=>(r(),c("div",{key:C.id,"data-word-position":C.position,class:"flex","data-hizb-number":m.hizb_number,"data-juz-number":m.juz_number,"data-chapter-id":m.chapter_id,"data-page-number":k},[O("div",{class:Ce([A(C.location,C.verse_key)?"text-blue":"","word"])},[C.char_type_name==="end"?(r(),c("div",Le,"("+h(C.text_uthmani)+") ",1)):(r(),c("h3",{key:1,style:le([d.defaultStyles,e(f)])},h(C.text_uthmani),5))],2)],8,Re))),128))],8,$e))),128))]),_:2},1032,["id"]),a(e(N),{size:"12"},{default:t(()=>[a(e(Ie),null,{default:t(()=>[a(e(T),{class:"m-auto"},{default:t(()=>[I(h(e(g)("quranReader.textPage"))+" "+h(k),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1}),ie(a(ue,{"onUpdate:modelValue":u[0]||(u[0]=v=>V.value=v)},null,512),[[oe,V.value]])]),_:1})])):j("",!0)}}),je=ze(De,[["__scopeId","data-v-9f747f39"]]),Ue=E({__name:"ChapterPage",setup($){const p=z("translations"),n=M(),f=_=>{p.value=_.detail.value},V=K(),{chapterId:g}=V.params;G(async()=>{var _;if(g){n.selectedChapter=null;const y=n.chaptersList.find(A=>A.id===Number(g));y&&((_=y.verses)!=null&&_.length?n.selectedChapter=y:await n.getVerses(y.id,!0))}});const b=z({fontFamily:"var(--font-family-noto-kufi)",fontSize:"var(--font-size-2)",fontWeight:"var(--font-weight-normal)"});return(_,y)=>(r(),w(e(Se),{"data-chapter-id":e(g)},{default:t(()=>[a(e(Ve),null,{default:t(()=>[a(e(H),null,{default:t(()=>[a(e(ke),{value:p.value,onIonChange:f},{default:t(()=>[a(e(W),{value:"translations"},{default:t(()=>[a(e(T),null,{default:t(()=>[I("Translations")]),_:1})]),_:1}),a(e(W),{value:"reading"},{default:t(()=>[a(e(T),null,{default:t(()=>[I("Reading")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(e(q),null,{default:t(()=>[a(Be,{"is-translations-view":p.value==="translations","default-styles":b.value},null,8,["is-translations-view","default-styles"]),a(je,{"is-reading-view":p.value==="reading","default-styles":b.value},null,8,["is-reading-view","default-styles"])]),_:1})]),_:1},8,["data-chapter-id"]))}});export{Ue as default};
