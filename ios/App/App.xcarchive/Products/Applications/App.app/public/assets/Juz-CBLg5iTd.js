import{d as O,A as V,u as F,B as de,a5 as H,Q as D,a7 as ce,a8 as G,a9 as me,o as i,f as p,b as a,a as e,w as t,F as T,r as S,c as P,s as A,aa as Q,v as L,ab as Y,ac as X,j as x,k as C,t as g,ad as K,ae as pe,af as Z,ag as ee,ah as ae,g as te,ai as ne,aj as se,ak as q,q as ge,al as ie,am as fe,l as _e,J as le,ap as oe,aq as re,m as E,ar as be,K as ye,a0 as he,i as ve,D as ze,at as Ie,a1 as ke,au as $e,av as M,a4 as Ce,n as je,aw as we}from"./index-CSnR3WyL.js";import{_ as ue,a as Ve,v as Be,s as Te,b as Se,A as Pe}from"./ChapterInfoModalComponent.vue_vue_type_script_setup_true_lang-R2QvnKQV.js";import{u as W,a as Ae}from"./ChapterStore-BzKdIpaO.js";import{u as xe}from"./JuzStore-C8SSu-7D.js";import{a as Ne,u as Re}from"./ModalComponent.vue_vue_type_script_setup_true_lang-BWKJX5VG.js";import{p as Le}from"./string-BRzLPHJq.js";import"./_plugin-vue_export-helper-5Z20xKf-.js";const qe=["id"],Ue={class:"d-flex ion-justify-content-between"},De=A("hr",null,null,-1),Je={key:0,class:"end"},Oe=["innerHTML"],Fe=O({__name:"TranslationsViewComponent",props:{id:{},isTranslationsView:{type:Boolean},isPlaying:{type:Boolean},isLoading:{type:Boolean},translatedBy:{},chapterName:{},isBismillah:{},verses:{},pagination:{},verseTiming:{},styles:{}},emits:["update:getVerses","update:playAudio","update:modalValue"],setup(U,{emit:j}){const w=V(),{getLine:z}=F(),{setStorage:r,bookmarkedItems:B}=de("__bookmarksDB"),{getChapterNameByFirstVerse:f,getChapterName:N}=W(),{params:R}=H(),I=D(()=>Number(R.juzId)),l=V(),d=U,h=j,v=async n=>{var c;B.value.push({key:"/page/".concat(n.page_number),value:{pageNumber:n.page_number,verseNumber:n.verse_number,verseText:n.text_uthmani,chapterName:(c=N(n.chapter_id))==null?void 0:c.nameSimple}}),B.value.forEach(({key:b,value:k})=>{r(b,k)})},s=n=>{var c;(c=d.pagination)!=null&&c.next_page?(h("update:getVerses",{key:d.id,nextPage:d.pagination.next_page}),setTimeout(()=>n.target.complete(),500)):n.target.complete()},_=([{isIntersecting:n,target:c,intersectionRatio:b}])=>{if(n&&b>=.8){const k=Number(c.getAttribute("data-verse-number"));l.value=k}};ce(l,n=>{n&&Te("#verse-col-".concat(n),w.value.$el,300)});const J=n=>{if(d.verseTiming)return d.verseTiming.wordLocation===n.location};return(n,c)=>G((i(),p("div",{class:"ion-page",id:"translations-".concat(n.id,"-").concat(I.value)},[a(ue,{"route-back-label":e(z)("tabs.juzs"),"is-loading":n.isLoading},null,8,["route-back-label","is-loading"]),a(e(E),{class:"quran-translation-content-wapper",fullscreen:!0,scrollY:!0},{default:t(()=>[(i(!0),p(T,null,S(n.verses,(b,k)=>(i(),P(e(le),{class:"ion-padding card-wrapper",ref_for:!0,ref_key:"cardRef",ref:w,key:k,id:"card-".concat(k)},{default:t(()=>[A("div",Ue,[a(e(Q),{onClick:o=>n.$emit("update:playAudio",{audioID:b[0].chapter_id,verseKey:b[0].verse_key}),color:"primary"},{default:t(()=>[a(e(L),{icon:n.isPlaying?e(Y):e(X)},null,8,["icon"]),a(e(x),null,{default:t(()=>[C(g(e(z)("quranReader.buttonPlay")),1)]),_:1})]),_:2},1032,["onClick"]),a(e(K),{onClick:c[0]||(c[0]=o=>n.$emit("update:modalValue",!0)),fill:"clear"},{default:t(()=>[a(e(L),{icon:e(pe),slot:"icon-only"},null,8,["icon"])]),_:1})]),a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>{var o;return[C(g((o=e(f)(b[0]))==null?void 0:o.nameArabic),1)]}),_:2},1024),a(e(ae),null,{default:t(()=>{var o;return[C(g((o=e(f)(b[0]))!=null&&o.bismillahPre?e(z)("quranReader.textBismillah"):""),1)]}),_:2},1024)]),_:2},1024),De,(i(!0),p(T,null,S(b,o=>G((i(),P(e(te),{key:o.verse_number,"data-verse-number":o.verse_number,"data-hizb-number":o.hizb_number,"data-juz-number":o.juz_number},{default:t(()=>[a(e(ne),null,{default:t(()=>[a(e(se),{class:"ion-align-items-start"},{default:t(()=>[a(e(q),{size:"11",class:"translations-view-col",id:"verse-col-".concat(o.verse_number)},{default:t(()=>[(i(!0),p(T,null,S(o.words,y=>(i(),P(e(x),{key:y.id},{default:t(()=>[a(e(ge),{color:J(y)?"primary":""},{default:t(()=>[y.char_type_name==="end"?(i(),p("span",Je," ("+g(y.text_uthmani)+")",1)):(i(),p("h3",{key:1,style:ie(n.styles)},g(y.text_uthmani),5))]),_:2},1032,["color"])]),_:2},1024))),128))]),_:2},1032,["id"]),a(e(q),{size:"1",class:"action-sheet"},{default:t(()=>[a(e(L),{icon:e(fe),color:"primary",id:"open-action-sheet".concat(o.verse_number)},null,8,["icon","id"]),a(Ve,{verse:o,"trigger-prop":"open-action-sheet".concat(o.verse_number),"onUpdate:bookmarked":v,"onUpdate:playVerseAudio":c[1]||(c[1]=y=>n.$emit("update:playAudio",{...y}))},null,8,["verse","trigger-prop"])]),_:2},1024),a(e(q),{size:"12",class:"ion-text-left"},{default:t(()=>[(i(!0),p(T,null,S(o.translations,y=>(i(),P(e(_e),{key:y.id,class:"translation"},{default:t(()=>[A("span",{innerHTML:y.text},null,8,Oe)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-verse-number","data-hizb-number","data-juz-number"])),[[e(Be),[_,{root:w.value,immediate:!1}]]])),128))]),_:2},1032,["id"]))),128)),a(e(oe),{onIonInfinite:s},{default:t(()=>[a(e(re),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1})],8,qe)),[[me,n.isTranslationsView]])}}),He=["id"],Ke={class:"d-flex ion-justify-content-between"},Ee=["id","data-hizb-number","data-chapter-id","data-juz-number","data-page-number","data-verse-number"],We=["data-word-position","data-hizb-number","data-juz-number","data-chapter-id","data-page-number"],Ge={key:0,class:"end"},Me=O({__name:"ReadingViewComponent",props:{id:{},isReadingView:{type:Boolean},isPlaying:{type:Boolean},verseTiming:{},verses:{},isLoading:{type:Boolean},pagination:{},styles:{}},emits:["update:getVerses","update:playAudio","update:surahInfo"],setup(U,{emit:j}){const{params:w}=H(),{getChapterNameByFirstVerse:z}=W(),{getLine:r}=F(),B=D(()=>Number(w.juzId)),f=U,N=j,R=(l,d)=>{if(f.isReadingView&&f.verseTiming)return f.verseTiming.wordLocation===l&&d===f.verseTiming.verseKey},I=l=>{var d;(d=f.pagination)!=null&&d.next_page?(N("update:getVerses",{key:f.id,nextPage:f.pagination.next_page}),setTimeout(()=>l.target.complete(),500)):l.target.complete()};return(l,d)=>l.isReadingView?(i(),p("div",{key:0,class:"ion-page",id:"".concat(l.id,"-").concat(B.value)},[a(ue,{"is-loading":l.isLoading,"route-back-label":e(r)("tabs.juzs")},null,8,["is-loading","route-back-label"]),a(e(E),null,{default:t(()=>[(i(!0),p(T,null,S(l.verses,(h,v)=>(i(),P(e(le),{class:"ion-padding",key:v,id:"row-page-".concat(v)},{default:t(()=>[A("div",Ke,[a(e(Q),{onClick:s=>l.$emit("update:playAudio",{audioID:h[0].chapter_id,verseKey:h[0].verse_key}),color:"primary"},{default:t(()=>[a(e(L),{icon:l.isPlaying?e(Y):e(X)},null,8,["icon"]),a(e(x),null,{default:t(()=>[C(g(e(r)("quranReader.buttonPlay")),1)]),_:1})]),_:2},1032,["onClick"]),a(e(K),{fill:"clear",onClick:s=>l.$emit("update:surahInfo",h[0].chapter_id)},{default:t(()=>[a(e(L),{icon:e(be),slot:"icon-only"},null,8,["icon"])]),_:2},1032,["onClick"])]),a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ae),null,{default:t(()=>{var s;return[C(g((s=e(z)(h[0]))!=null&&s.bismillahPre?e(r)("quranReader.textBismillah"):""),1)]}),_:2},1024),a(e(ee),null,{default:t(()=>{var s;return[C(g((s=e(z)(h[0]))==null?void 0:s.nameArabic),1)]}),_:2},1024)]),_:2},1024),a(e(ye),{class:"ion-padding quran-reader-content-wrapper"},{default:t(()=>[a(e(ne),null,{default:t(()=>[a(e(se),null,{default:t(()=>[a(e(q),{class:"verse-col",id:"page-".concat(v),size:"12"},{default:t(()=>[(i(!0),p(T,null,S(h,s=>(i(),p("div",{class:"word-wrapper",key:s.id,id:"line-".concat(s.verse_number),"data-hizb-number":s.hizb_number,"data-chapter-id":s.chapter_id,"data-juz-number":s.juz_number,"data-page-number":v,"data-verse-number":s.verse_number},[(i(!0),p(T,null,S(s.words,_=>(i(),p("div",{key:_.id,"data-word-position":_.position,class:"flex","data-hizb-number":s.hizb_number,"data-juz-number":s.juz_number,"data-chapter-id":s.chapter_id,"data-page-number":v},[A("span",{class:he([R(_.location,_.verse_key)?"text-blue":"","word"])},[_.char_type_name==="end"?(i(),p("div",Ge,"("+g(_.text_uthmani)+") ",1)):(i(),p("h3",{key:1,style:ie(l.styles)},g(_.text_uthmani),5))],2)],8,We))),128))],8,Ee))),128))]),_:2},1032,["id"]),a(e(q),{size:"12"},{default:t(()=>[a(e(te),{class:"ion-text-center"},{default:t(()=>[a(e(x),{class:"m-auto"},{default:t(()=>[C(g(e(r)("quranReader.textPage"))+" "+g(v),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["id"]))),128)),a(e(oe),{onIonInfinite:I},{default:t(()=>[a(e(re),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1})],8,He)):ve("",!0)}}),na=O({__name:"Juz",setup(U){const j=V("translations"),{getLine:w}=F(),z=Ne(),r=xe(),B=Ae(),{selectedChapterName:f,selectedChapterBismillah:N,getchapterInfo:R}=W(),I=Re(),l=D(()=>{var u;return(u=r.selectedJuz)==null?void 0:u.pagination}),d=V(!1),h=V(),v=V(),s=V(null),_=V(),J=u=>{j.value=u.detail.value},n=H();ze(async()=>{var u;if(n.params.juzId){r.selectedJuz=null;const m=r.juzList.find($=>$.juz_number===Number(n.params.juzId));m&&((u=m.verses)!=null&&u.length?r.selectedJuz=m:await r.getVerses(m.id,!0))}});const c=async u=>{await I.getAudio({audioID:u.audioID,verseKey:u.verseKey}),d.value=!0},b=async u=>{var m,$;u.nextPage&&r.selectedJuz&&await r.getVerses((m=r.selectedJuz)==null?void 0:m.juz_number,!0,($=l.value)==null?void 0:$.next_page)},k=D(()=>({fontFamily:"var(--font-family-".concat(z.styles.value.fontFamily,")"),fontSize:"var(--font-size-".concat(z.styles.value.fontSize,")"),fontWeight:"var(--font-weight-".concat(z.styles.value.fontWeight,")")})),o=async u=>{await R(u).then(m=>{s.value=m.data.chapter_info}),_.value.$el.click()},y=async()=>{var m,$;await(await we.create({header:Le(String((m=B.selectedTranslation)==null?void 0:m.language_name)),message:($=B.selectedTranslation)==null?void 0:$.author_name,id:"translation-alert",buttons:["Ok"]})).present()};return Ie(()=>v.value=h.value.$el),(u,m)=>(i(),P(e(je),{"data-juz-id":e(n).params.juzId,ref_key:"pageRef",ref:h},{default:t(()=>[a(e(Ce),null,{default:t(()=>[a(e(ke),null,{default:t(()=>[a(e($e),{value:j.value,onIonChange:J},{default:t(()=>[a(e(M),{value:"translations"},{default:t(()=>[a(e(x),null,{default:t(()=>[C(g(e(w)("tabs.translations")),1)]),_:1})]),_:1}),a(e(M),{value:"reading"},{default:t(()=>[a(e(x),null,{default:t(()=>[C(g(e(w)("tabs.reading")),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(Fe,{id:"translations-juzs","is-loading":e(r).isLoading,"is-playing":e(I).isPlaying,"onUpdate:modalValue":y,"is-translations-view":j.value==="translations","onUpdate:playAudio":c,"is-bismillah":e(N),styles:k.value,verses:e(r).juzVersesByChapterMap,"chapter-name":e(f).nameArabic,"verse-timing":e(I).verseTiming,"onUpdate:getVerses":b,pagination:l.value},null,8,["is-loading","is-playing","is-translations-view","is-bismillah","styles","verses","chapter-name","verse-timing","pagination"]),a(Me,{id:"reading-juzs","is-reading-view":j.value==="reading","is-playing":e(I).isPlaying,verses:e(r).juzVersesByChapterMap,"onUpdate:playAudio":c,"is-loading":e(r).isLoading,styles:k.value,"verse-timing":e(I).verseTiming,pagination:l.value,"onUpdate:getVerses":b,"onUpdate:surahInfo":o},null,8,["is-reading-view","is-playing","verses","is-loading","styles","verse-timing","pagination"]),A("div",null,[a(e(K),{ref_key:"chapterInfoButtonRef",ref:_,id:"juz-chapter-modal",class:"ion-hide"},null,512),a(Se,{trigger:"juz-chapter-modal","chapter-info":s.value,"page-el":v.value},null,8,["chapter-info","page-el"])])]),_:1}),a(Pe,{"model-value":d.value,"onUpdate:modelValue":m[0]||(m[0]=$=>d.value=$)},null,8,["model-value"])]),_:1},8,["data-juz-id"]))}});export{na as default};
