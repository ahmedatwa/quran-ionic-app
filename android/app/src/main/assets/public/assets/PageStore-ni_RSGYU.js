import{_ as z,aw as C,z as n,P as l,as as F,a5 as I}from"./index-CJnewdVb.js";import{a as k,u as A,i as D,b as O}from"./ChapterStore-CS45AkxF.js";const M=604,T=()=>new Promise((o,v)=>{try{z(()=>import("./pages-to-chapters-D7g_vu2i.js"),[]).then(t=>o(t.default))}catch(t){v(t)}}),R=C("page-store",()=>{const o=n(!1),v=n(10),{selectedTranslation:t}=k(),{getChapterNameByChapterId:N}=A(),e=n(null),f=n(),p=n(""),i=n([]),d=l(()=>t!=null&&t.id?String(t.id):"131"),y=l(()=>{if(i.value)return i.value.filter(a=>a.pageNumber.toLocaleString().includes(p.value.toLocaleLowerCase()))}),h=async(a,u,E=1,S=v.value)=>{o.value=u,f.value=a,await D.get(O("by_page",a,d.value,E,S)).then(c=>{var m,_;const s=(m=i.value)==null?void 0:m.find(g=>g.pageNumber===a);s&&(c.data.verses.forEach(g=>{var b,P;((b=s.verses)==null?void 0:b.find(V=>V.verse_key===g.verse_key))||(P=s.verses)==null||P.push({...g,bookmarked:!1})}),s.pagination=c.data.pagination,((_=e.value)==null?void 0:_.pageNumber)===s.pageNumber&&e.value&&(e.value.verses=s.verses,e.value.pagination=s.pagination))}).catch(c=>{throw c}).finally(()=>{o.value=!1})};F(async()=>{await T().then(a=>{a.forEach(u=>i.value.push(u))})}),I(()=>d.value,async a=>{var u;a&&e.value&&(e.value.verses=[],await h((u=e.value)==null?void 0:u.pageNumber,!0))});const r=l(()=>{if(e.value)return e.value.verses[0]}),w=l(()=>{if(e.value)return e.value.verses.slice(-1)[0]}),L=l(()=>{if(r.value)return{left:N(r.value.chapter_id),right:{pageNumber:r.value.page_number,hizbNumber:r.value.hizb_number,juzNumber:r.value.juz_number}}});return{pages:y,pagesList:i,perPage:v,isLoading:o,selectedPage:e,selectedPageId:f,searchValue:p,getLastVerseOfPage:w,getFirstVerseOfPage:r,getInitialHeaderData:L,getVerses:h}});export{M as D,R as u};
