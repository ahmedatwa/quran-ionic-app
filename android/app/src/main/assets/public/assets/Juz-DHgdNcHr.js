import{d as D,z as V,u as H,A as de,a3 as F,P as J,a5 as ce,a6 as G,a7 as me,o as s,f as p,b as a,a as e,w as t,F as B,r as S,c as P,s as A,a8 as Y,v as x,a9 as Q,aa as X,j as N,k as $,t as g,ab as E,ac as pe,ad as Z,ae as ee,af as ae,g as te,ag as ne,ah as ie,ai as q,q as ge,aj as se,ak as fe,l as _e,H as le,an as oe,ao as re,m as K,ap as be,J as he,aq as ye,i as ve,C as ze,as as Ie,$ as ke,at as Ce,au as M,a2 as $e,n as je,av as we}from"./index-CJnewdVb.js";import{_ as ue,a as Ve,v as Te,s as Be,b as Se,A as Pe}from"./ChapterInfoModalComponent.vue_vue_type_script_setup_true_lang-Bzm30Kof.js";import{u as W,a as Ae}from"./ChapterStore-CS45AkxF.js";import{u as Ne}from"./JuzStore-CYUqfU1D.js";import{a as Re,u as Le}from"./ModalComponent.vue_vue_type_script_setup_true_lang-CY6DRNXA.js";import{p as xe}from"./string-BRzLPHJq.js";import"./_plugin-vue_export-helper-5Z20xKf-.js";const qe=["id"],Ue=A("hr",null,null,-1),Je={key:0,class:"end"},Oe=["innerHTML"],De=D({__name:"TranslationsViewComponent",props:{id:{},isTranslationsView:{type:Boolean},isPlaying:{type:Boolean},isLoading:{type:Boolean},translatedBy:{},chapterName:{},isBismillah:{},verses:{},pagination:{},verseTiming:{},styles:{}},emits:["update:getVerses","update:playAudio","update:modalValue"],setup(U,{emit:j}){const w=V(),{getLine:z}=H(),{setStorage:r,bookmarkedItems:T}=de("__bookmarksDB"),{getChapterNameByFirstVerse:f,getChapterName:R}=W(),{params:L}=F(),I=J(()=>Number(L.juzId)),l=V(),d=U,y=j,v=async n=>{var c;T.value.push({key:"/page/".concat(n.page_number),value:{pageNumber:n.page_number,verseNumber:n.verse_number,verseText:n.text_uthmani,chapterName:(c=R(n.chapter_id))==null?void 0:c.nameSimple}}),T.value.forEach(({key:b,value:k})=>{r(b,k)})},i=n=>{var c;(c=d.pagination)!=null&&c.next_page?(y("update:getVerses",{key:d.id,nextPage:d.pagination.next_page}),setTimeout(()=>n.target.complete(),500)):n.target.complete()},_=([{isIntersecting:n,target:c,intersectionRatio:b}])=>{if(n&&b>=.8){const k=Number(c.getAttribute("data-verse-number"));l.value=k}};ce(l,n=>{n&&Be("#verse-col-".concat(n),w.value.$el,300)});const O=n=>{if(d.verseTiming)return d.verseTiming.wordLocation===n.location};return(n,c)=>G((s(),p("div",{class:"ion-page",id:"translations-".concat(n.id,"-").concat(I.value)},[a(ue,{"route-back-label":e(z)("tabs.juzs"),"is-loading":n.isLoading},null,8,["route-back-label","is-loading"]),a(e(K),{class:"quran-translation-content-wapper",fullscreen:!0,scrollY:!0},{default:t(()=>[(s(!0),p(B,null,S(n.verses,(b,k)=>(s(),P(e(le),{class:"ion-padding card-wrapper",ref_for:!0,ref_key:"cardRef",ref:w,key:k,id:"card-".concat(k)},{default:t(()=>[A("div",null,[a(e(Y),{onClick:o=>n.$emit("update:playAudio",{audioID:b[0].chapter_id,verseKey:b[0].verse_key}),color:"primary",class:"ion-float-right"},{default:t(()=>[a(e(x),{icon:n.isPlaying?e(Q):e(X)},null,8,["icon"]),a(e(N),null,{default:t(()=>[$(g(e(z)("quranReader.buttonPlay")),1)]),_:1})]),_:2},1032,["onClick"]),a(e(E),{onClick:c[0]||(c[0]=o=>n.$emit("update:modalValue",!0)),fill:"clear"},{default:t(()=>[a(e(x),{icon:e(pe),slot:"icon-only"},null,8,["icon"])]),_:1})]),a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>{var o;return[$(g((o=e(f)(b[0]))!=null&&o.bismillahPre?e(z)("quranReader.textBismillah"):""),1)]}),_:2},1024),a(e(ae),null,{default:t(()=>{var o;return[$(g((o=e(f)(b[0]))==null?void 0:o.nameArabic),1)]}),_:2},1024)]),_:2},1024),Ue,(s(!0),p(B,null,S(b,o=>G((s(),P(e(te),{key:o.verse_number,"data-verse-number":o.verse_number,"data-hizb-number":o.hizb_number,"data-juz-number":o.juz_number},{default:t(()=>[a(e(ne),null,{default:t(()=>[a(e(ie),{class:"ion-align-items-start"},{default:t(()=>[a(e(q),{size:"11",class:"translations-view-col",id:"verse-col-".concat(o.verse_number)},{default:t(()=>[(s(!0),p(B,null,S(o.words,h=>(s(),P(e(N),{key:h.id},{default:t(()=>[a(e(ge),{color:O(h)?"primary":""},{default:t(()=>[h.char_type_name==="end"?(s(),p("span",Je," ("+g(h.text_uthmani)+")",1)):(s(),p("h3",{key:1,style:se(n.styles)},g(h.text_uthmani),5))]),_:2},1032,["color"])]),_:2},1024))),128))]),_:2},1032,["id"]),a(e(q),{size:"1",class:"action-sheet"},{default:t(()=>[a(e(x),{icon:e(fe),color:"primary",id:"open-action-sheet".concat(o.verse_number)},null,8,["icon","id"]),a(Ve,{verse:o,"trigger-prop":"open-action-sheet".concat(o.verse_number),"onUpdate:bookmarked":v,"onUpdate:playVerseAudio":c[1]||(c[1]=h=>n.$emit("update:playAudio",{...h}))},null,8,["verse","trigger-prop"])]),_:2},1024),a(e(q),{size:"12",class:"ion-text-left"},{default:t(()=>[(s(!0),p(B,null,S(o.translations,h=>(s(),P(e(_e),{key:h.id,class:"translation"},{default:t(()=>[A("span",{innerHTML:h.text},null,8,Oe)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["data-verse-number","data-hizb-number","data-juz-number"])),[[e(Te),[_,{root:w.value,immediate:!1}]]])),128))]),_:2},1032,["id"]))),128)),a(e(oe),{onIonInfinite:i},{default:t(()=>[a(e(re),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1})],8,qe)),[[me,n.isTranslationsView]])}}),He=["id"],Fe=["id","data-hizb-number","data-chapter-id","data-juz-number","data-page-number","data-verse-number"],Ee=["data-word-position","data-hizb-number","data-juz-number","data-chapter-id","data-page-number"],Ke={key:0,class:"end"},We=D({__name:"ReadingViewComponent",props:{id:{},isReadingView:{type:Boolean},isPlaying:{type:Boolean},verseTiming:{},verses:{},isLoading:{type:Boolean},pagination:{},styles:{}},emits:["update:getVerses","update:playAudio","update:surahInfo"],setup(U,{emit:j}){const{params:w}=F(),{getChapterNameByFirstVerse:z}=W(),{getLine:r}=H(),T=J(()=>Number(w.juzId)),f=U,R=j,L=(l,d)=>{if(f.isReadingView&&f.verseTiming)return f.verseTiming.wordLocation===l&&d===f.verseTiming.verseKey},I=l=>{var d;(d=f.pagination)!=null&&d.next_page?(R("update:getVerses",{key:f.id,nextPage:f.pagination.next_page}),setTimeout(()=>l.target.complete(),500)):l.target.complete()};return(l,d)=>l.isReadingView?(s(),p("div",{key:0,class:"ion-page",id:"".concat(l.id,"-").concat(T.value)},[a(ue,{"is-loading":l.isLoading,"route-back-label":e(r)("tabs.juzs")},null,8,["is-loading","route-back-label"]),a(e(K),null,{default:t(()=>[(s(!0),p(B,null,S(l.verses,(y,v)=>(s(),P(e(le),{class:"ion-padding",key:v,id:"row-page-".concat(v)},{default:t(()=>[A("div",null,[a(e(Y),{onClick:i=>l.$emit("update:playAudio",{audioID:y[0].chapter_id,verseKey:y[0].verse_key}),color:"primary",class:"ion-float-right"},{default:t(()=>[a(e(x),{icon:l.isPlaying?e(Q):e(X)},null,8,["icon"]),a(e(N),null,{default:t(()=>[$(g(e(r)("quranReader.buttonPlay")),1)]),_:1})]),_:2},1032,["onClick"]),a(e(E),{fill:"clear",onClick:i=>l.$emit("update:surahInfo",y[0].chapter_id)},{default:t(()=>[a(e(x),{icon:e(be),slot:"icon-only"},null,8,["icon"])]),_:2},1032,["onClick"])]),a(e(Z),{class:"ion-text-center"},{default:t(()=>[a(e(ee),null,{default:t(()=>{var i;return[$(g((i=e(z)(y[0]))!=null&&i.bismillahPre?e(r)("quranReader.textBismillah"):""),1)]}),_:2},1024),a(e(ae),null,{default:t(()=>{var i;return[$(g((i=e(z)(y[0]))==null?void 0:i.nameArabic),1)]}),_:2},1024)]),_:2},1024),a(e(he),{class:"ion-padding quran-reader-content-wrapper"},{default:t(()=>[a(e(ne),null,{default:t(()=>[a(e(ie),null,{default:t(()=>[a(e(q),{class:"verse-col",id:"page-".concat(v),size:"12"},{default:t(()=>[(s(!0),p(B,null,S(y,i=>(s(),p("div",{class:"word-wrapper",key:i.id,id:"line-".concat(i.verse_number),"data-hizb-number":i.hizb_number,"data-chapter-id":i.chapter_id,"data-juz-number":i.juz_number,"data-page-number":v,"data-verse-number":i.verse_number},[(s(!0),p(B,null,S(i.words,_=>(s(),p("div",{key:_.id,"data-word-position":_.position,class:"flex","data-hizb-number":i.hizb_number,"data-juz-number":i.juz_number,"data-chapter-id":i.chapter_id,"data-page-number":v},[A("span",{class:ye([L(_.location,_.verse_key)?"text-blue":"","word"])},[_.char_type_name==="end"?(s(),p("div",Ke,"("+g(_.text_uthmani)+") ",1)):(s(),p("h3",{key:1,style:se(l.styles)},g(_.text_uthmani),5))],2)],8,Ee))),128))],8,Fe))),128))]),_:2},1032,["id"]),a(e(q),{size:"12"},{default:t(()=>[a(e(te),{class:"ion-text-center"},{default:t(()=>[a(e(N),{class:"m-auto"},{default:t(()=>[$(g(e(r)("quranReader.textPage"))+" "+g(v),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["id"]))),128)),a(e(oe),{onIonInfinite:I},{default:t(()=>[a(e(re),{"loading-text":"Please wait...","loading-spinner":"bubbles"})]),_:1})]),_:1})],8,He)):ve("",!0)}}),aa=D({__name:"Juz",setup(U){const j=V("translations"),{getLine:w}=H(),z=Re(),r=Ne(),T=Ae(),{selectedChapterName:f,selectedChapterBismillah:R,getchapterInfo:L}=W(),I=Le(),l=J(()=>{var u;return(u=r.selectedJuz)==null?void 0:u.pagination}),d=V(!1),y=V(),v=V(),i=V(null),_=V(),O=u=>{j.value=u.detail.value},n=F();ze(async()=>{var u;if(n.params.juzId){r.selectedJuz=null;const m=r.juzList.find(C=>C.juz_number===Number(n.params.juzId));m&&((u=m.verses)!=null&&u.length?r.selectedJuz=m:await r.getVerses(m.id,!0))}});const c=async u=>{await I.getAudio({audioID:u.audioID,verseKey:u.verseKey}),d.value=!0},b=async u=>{var m,C;u.nextPage&&r.selectedJuz&&await r.getVerses((m=r.selectedJuz)==null?void 0:m.juz_number,!0,(C=l.value)==null?void 0:C.next_page)},k=J(()=>({fontFamily:"var(--font-family-".concat(z.styles.value.fontFamily,")"),fontSize:"var(--font-size-".concat(z.styles.value.fontSize,")"),fontWeight:"var(--font-weight-".concat(z.styles.value.fontWeight,")")})),o=async u=>{await L(u).then(m=>{i.value=m.data.chapter_info}),_.value.$el.click()},h=async()=>{var m,C;await(await we.create({header:xe(String((m=T.selectedTranslation)==null?void 0:m.language_name)),message:(C=T.selectedTranslation)==null?void 0:C.author_name,id:"translation-alert",buttons:["Ok"]})).present()};return Ie(()=>v.value=y.value.$el),(u,m)=>(s(),P(e(je),{"data-juz-id":e(n).params.juzId,ref_key:"pageRef",ref:y},{default:t(()=>[a(e($e),null,{default:t(()=>[a(e(ke),null,{default:t(()=>[a(e(Ce),{value:j.value,onIonChange:O},{default:t(()=>[a(e(M),{value:"translations"},{default:t(()=>[a(e(N),null,{default:t(()=>[$(g(e(w)("tabs.translations")),1)]),_:1})]),_:1}),a(e(M),{value:"reading"},{default:t(()=>[a(e(N),null,{default:t(()=>[$(g(e(w)("tabs.reading")),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(e(K),null,{default:t(()=>[a(De,{id:"translations-juzs","is-loading":e(r).isLoading,"is-playing":e(I).isPlaying,"onUpdate:modalValue":h,"is-translations-view":j.value==="translations","onUpdate:playAudio":c,"is-bismillah":e(R),styles:k.value,verses:e(r).juzVersesByChapterMap,"chapter-name":e(f).nameArabic,"verse-timing":e(I).verseTiming,"onUpdate:getVerses":b,pagination:l.value},null,8,["is-loading","is-playing","is-translations-view","is-bismillah","styles","verses","chapter-name","verse-timing","pagination"]),a(We,{id:"reading-juzs","is-reading-view":j.value==="reading","is-playing":e(I).isPlaying,verses:e(r).juzVersesByChapterMap,"onUpdate:playAudio":c,"is-loading":e(r).isLoading,styles:k.value,"verse-timing":e(I).verseTiming,pagination:l.value,"onUpdate:getVerses":b,"onUpdate:surahInfo":o},null,8,["is-reading-view","is-playing","verses","is-loading","styles","verse-timing","pagination"]),A("div",null,[a(e(E),{ref_key:"chapterInfoButtonRef",ref:_,id:"juz-chapter-modal",class:"ion-hide"},null,512),a(Se,{trigger:"juz-chapter-modal","chapter-info":i.value,"page-el":v.value},null,8,["chapter-info","page-el"])])]),_:1}),a(Pe,{"model-value":d.value,"onUpdate:modelValue":m[0]||(m[0]=C=>d.value=C)},null,8,["model-value"])]),_:1},8,["data-juz-id"]))}});export{aa as default};
